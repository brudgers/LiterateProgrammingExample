<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /><title>Literate Programming Example</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="racket.css" title="default" /><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default" /><script type="text/javascript" src="scribble-common.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Literate Programming Example</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.Introduction%29" class="tocviewlink" data-pltdoc="x">Introduction</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.Weaving%29" class="tocviewlink" data-pltdoc="x">Weaving</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._.Tangling%29" class="tocviewlink" data-pltdoc="x">Tangling</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part._.Conclusions%29" class="tocviewlink" data-pltdoc="x">Conclusions</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#(part._.Introduction)" class="tocsubseclink" data-pltdoc="x">Introduction</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#(part._.Weaving)" class="tocsubseclink" data-pltdoc="x">Weaving</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#(part._.Tangling)" class="tocsubseclink" data-pltdoc="x">Tangling</a></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28chunk._~3cexample_main~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;example_main&gt;</a></span></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28chunk._~3cexample_import.Export~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;example_importExport&gt;</a></span></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28chunk._~3cblue_square~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;blue_square&gt;</a></span></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28chunk._~3cexample_body~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;example_body&gt;</a></span></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#(part._.Conclusions)" class="tocsubseclink" data-pltdoc="x">Conclusions</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="versionNoNav">5.3.6</span></div><h2><a name="(part._.Literate_.Programming_.Example)"></a>Literate Programming Example</h2><p>This is the result of my recent research on Literate Programming in Racket. The name of this file is <span class="RktSym">LPexample.scrbl</span><span class="RktMeta"></span>. It&rsquo;s not perfect as I still have not solved the problem of broken links, but I&rsquo;m working on it.</p><p><span class="RktMeta">LPexample.rkt</span> is the source file for this document</p><h3>1<tt>&nbsp;</tt><a name="(part._.Introduction)"></a>Introduction</h3><p>Racket&rsquo;s <span class="RktMeta">scribble/lp</span> language allows programs to be written in the Literate Programming Idiom. The documentation, however, is not very clear. This should not be particularly surprising because Racket&rsquo;s documentation is sometimes lacking when it comes to features outside the core and when something between very basic material and detailed reference is needed.</p><h3>2<tt>&nbsp;</tt><a name="(part._.Weaving)"></a>Weaving</h3><p>The process of weaving is where <span class="RktMeta">scribble/lp</span> is a bit confusing.  Unlike documents in <span class="RktMeta">scribble/base</span> or <span class="RktMeta">scribble/manual</span>, documents written in <span class="RktMeta">scribble/lp</span> cannot be directly rendered to <span class="RktMeta">HTML</span> or <span class="RktMeta">LaTeX</span>. This is why DrRacket does not provide "the easy button" when it sees a <span class="RktMeta">scribble/lp</span> document.</p><p>Documents written using <span class="RktMeta">#lang</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><font class="badlink"><span class="RktModLink"><span class="RktSym">scribble/lp</span></span></font><span class="RktMeta"></span> use the file extension <span class="RktMeta">.rkt</span> not <span class="RktMeta">.scrbl</span>.</p><p><div class="SIntrapara">This means that a Racket Literate Program requires a second document written in either <span class="RktMeta">scribble/base</span> or <span class="RktMeta">scribble/manual</span>. This can be very basic:
</div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">#lang scribble/manual</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@require[scribble/lp-include]</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@title{Literate Programming Example}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">This is the result of my recent research on Literate Programming in Racket. The name of this file is @code{LPexample.scrbl}.</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@lp-include["LPexample.rkt"]</span></span></p></td></tr></table></div></p><p>The file for weaving has a file extension of <span class="RktMeta">.scrbl</span>. To weave <span class="RktMeta">LPexample.rkt</span> we run the <span class="RktMeta">scribble</span> command on its corresponding <span class="RktMeta">.scrbl</span> file. In this case: <span class="RktMeta">LPexample.scrbl</span></p><h3>3<tt>&nbsp;</tt><a name="(part._.Tangling)"></a>Tangling</h3><p><div class="SIntrapara">A <span class="RktMeta">scribble/lp</span> file contains both the code for <span style="font-style: italic">tangling</span> into a program or library and the text for <span style="font-style: italic">weaving</span> into a document. Like its parent <span class="RktMeta">scribble</span>, <span class="RktMeta">scribble/lp</span> allows direct input of text. The code to be tangled is deliniated:
</div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">@chunk[&lt;example_main&gt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;example_requires&gt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;example_exports&gt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;example_body&gt;]</span></span></p></td></tr></table></div></p><p>Which matches the source for this output from the weaving proccess:</p><p><div class="SIntrapara"><a name="(elem._(chunk._~3cexample_main~3e~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28chunk._~3cexample_main~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;example_main&gt;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><a href="#%28elem._%28chunk._~3cexample_import.Export~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;example_importExport&gt;</a></td></tr><tr><td><a href="#%28elem._%28chunk._~3cexample_body~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;example_body&gt;</a></td></tr></table></blockquote></div></p><p><div class="SIntrapara">Beacuse this is the first </div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">@chunk</span></span></p></td></tr></table></div><div class="SIntrapara"> it is treated as the <span style="font-style: italic">main chunk</span>. This is mentioned briefly near the bottom of the <a href="http://docs.racket-lang.org/scribble/lp.html"><span class="RktMeta">scribble/lp</span> documentation</a>. If you don&rsquo;t want the first </div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">@chunk</span></span></p></td></tr></table></div><div class="SIntrapara"> to serve as the main chunk, then:</div></p><p><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">@chunk[&lt;*&gt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;example_requires&gt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;example_exports&gt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;example_body&gt;]</span></span></p></td></tr></table></p><p>can be placed anywhere in the document to serve as the main chunk. Having tried it, it really doesn&rsquo;t add anything for clarity and is unnessary.</p><p>The reason it is unnessary is that tangling can entail composing the code in a sequence other than what would normally be used in a <span class="RktMeta">#lang</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><font class="badlink"><span class="RktModLink"><span class="RktSym">racket</span></span></font><span class="RktMeta"></span> program. For example, required modules need not be near the top. This chunk:</p><p><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">@chunk[&lt;example_importExport&gt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(require 2htdp/image)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(provide (all-defined-out))]</span></span></p></td></tr></table></p><p>produces, this output from the weaving process:</p><p><div class="SIntrapara"><a name="(elem._(chunk._~3cexample_import.Export~3e~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28chunk._~3cexample_import.Export~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;example_importExport&gt;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">require</span><span class="hspace">&nbsp;</span><span class="RktSym">2htdp/image</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">provide</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">all-defined-out</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara">As shown in the example, source chunks like this:
</div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">@chunk[&lt;blue_square&gt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">(rectangle 100 100 "solid" "blue")</span></span></p></td></tr></table></div></p><p>which weaves to this:</p><p><div class="SIntrapara"><a name="(elem._(chunk._~3cblue_square~3e~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28chunk._~3cblue_square~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;blue_square&gt;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">rectangle</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktVal">"blue"</span><span class="RktPn">)</span></p></blockquote></div></p><p><div class="SIntrapara">can be composed into other functions this way:
</div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">@chunk[&lt;blue_square&gt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">(beside/align "bottom"</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(ellipse 20 70 "solid" "lightsteelblue")</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;blue_square&gt;)]</span></span></p></td></tr></table></div></p><p>which weaves out to:</p><p><div class="SIntrapara"><a name="(elem._(chunk._~3cexample_body~3e~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28chunk._~3cexample_body~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;example_body&gt;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">beside/align</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">"bottom"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">ellipse</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="hspace">&nbsp;</span><span class="RktVal">70</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktVal">"lightsteelblue"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28elem._%28chunk._~3cblue_square~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;blue_square&gt;</a><span class="RktPn">)</span></td></tr></table></blockquote></div></p><h3>4<tt>&nbsp;</tt><a name="(part._.Conclusions)"></a>Conclusions</h3><p><div class="SIntrapara">The two items which required teasing out from the documentation are:
</div><div class="SIntrapara"><ul><li><p>Weaving requires a second file where a file with a <span class="RktMeta">.rkt</span> file extension is referenced using <span class="RktMeta">lp-include</span>.</p></li><li><p>Tangling treats the first chunk differently unless the <span class="RktMeta">&lt;*&gt;</span> special name is used.</p></li></ul></div></p><p>Lastly, it is still unclear to me how to resolve broken references easily. But I&rsquo;m working on it and I will let you know. Happy Literate Programming, Ben.</p></div></div><div id="contextindicator">&nbsp;</div></body></html>